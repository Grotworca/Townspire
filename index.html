<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Losowanie z Back (stała pula 10)</title>
  <style>
    html,body{margin:0;width:100%;height:100%;background:#000}
    img{position:fixed;inset:0;width:100vw;height:100vh;object-fit:contain;object-position:center;
        user-select:none;cursor:pointer}
    #back{position:fixed;top:12px;left:12px;padding:6px 10px;background:rgba(255,255,255,.2);
          color:#fff;font:bold 16px sans-serif;border-radius:4px;z-index:9;user-select:none;cursor:pointer}
    #back.disabled{opacity:.4;cursor:default}
    #counter{position:fixed;top:12px;right:12px;padding:6px 10px;background:rgba(255,255,255,.2);
             color:#fff;font:bold 18px sans-serif;border-radius:4px;z-index:9;pointer-events:none}
  </style>
</head>
<body>
  <div id="back" class="disabled">Back</div>
  <div id="counter">Turn: 0</div>
  <img id="viewer" alt="viewer">

<script>
const folder='img/', ext='.jpg', total=10;
const $img=document.getElementById('viewer');
const $back=document.getElementById('back');
const $cnt=document.getElementById('counter');

let sequence=[], idx=-1;     // idx: -1=start, 0-9 obrazki, 10=end

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()* (i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];}
  return arr;
}
function newRound(){
  sequence=shuffle([...Array(total).keys()].map(i=>i+1)); // [1..10] random
  idx=-1;
  render();
}
function render(){
  let code;
  if(idx===-1)       code='0';          // startowy obraz
  else if(idx===total) code='end';      // końcowy
  else                code=sequence[idx];
  $img.src=`${folder}${code}${ext}`;

  $cnt.textContent= idx<0 ? 'Turn: 0' : idx<total ? `Turn: ${idx+1}` : 'End';
  $back.classList.toggle('disabled',idx<=-1);
}
function next(){
  if(idx<total) idx++;
  if(idx>total) idx=total;
  render();
}
function prev(){
  if(idx<=-1) return;
  idx--;
  render();
}

/* --- zdarzenia --- */
$img.addEventListener('click',()=>{
  if(idx===total) newRound();
  else next();
});
$back.addEventListener('click',()=>{ if(!$back.classList.contains('disabled')) prev(); });

/* start */
newRound();
</script>
</body>
</html>
